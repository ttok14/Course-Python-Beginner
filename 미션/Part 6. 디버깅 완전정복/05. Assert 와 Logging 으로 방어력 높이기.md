### **미션 제목**: 성적 처리 시스템에 방어 코드 적용하기

### **미션 내용**:
학생들의 성적 데이터를 처리하여 평균 점수를 계산하는 함수를 작성합니다. 이 과정에서 데이터의 유효성을 검증하고, 처리 과정을 체계적으로 기록하기 위해 이번 시간에 배운 `assert`와 `logging`을 적용합니다.

### **미션 요구 사항**:

1.  `process_scores`라는 이름의 함수를 정의합니다. 이 함수는 학생 정보(이름과 점수)가 담긴 딕셔너리들의 리스트를 인자로 받습니다.
2.  `assert`를 사용하여 함수 내부에서 각 학생의 점수(`score`)가 0점 이상 100점 이하인지 검증합니다. 만약 이 범위를 벗어나는 점수가 발견되면, `AssertionError`가 발생해야 합니다.
3.  `logging` 모듈을 설정하여 모든 기록이 터미널이 아닌 `grade_reporter.log` 파일에 저장되도록 합니다.
    *   파일에 내용을 기록할 때마다 이전 내용은 삭제되고 새로 작성되어야 합니다(`filemode='w'`).
    *   한글이 포함된 로그가 깨지지 않도록 인코딩을 `utf-8`로 설정합니다.
4.  로그 레벨을 `DEBUG`로 설정하고, 다음과 같이 각기 다른 레벨의 로그를 기록합니다.
    *   **DEBUG**: 함수가 시작될 때, 처리할 학생 데이터의 총 수를 기록합니다.
    *   **INFO**: `for` 반복문 내부에서 각 학생의 이름과 점수를 처리하고 있다는 정보를 기록합니다.
    *   **WARNING**: 만약 학생의 점수가 60점 미만일 경우, "과락" 경고 메시지를 기록합니다.
    *   **INFO**: 모든 계산이 끝난 후, 최종적으로 계산된 평균 점수를 기록합니다.
5.  함수 외부에서는 `try...except AssertionError` 구문을 사용하여 `process_scores` 함수를 호출합니다. 이를 통해 유효하지 않은 데이터로 인해 `AssertionError`가 발생하더라도 프로그램이 비정상적으로 종료되지 않고, 적절한 오류 메시지를 출력하도록 처리합니다.
6.  아래 제공된 두 개의 데이터 리스트(`valid_data`, `invalid_data`)를 각각 사용하여 함수를 실행하고, `grade_reporter.log` 파일에 결과가 올바르게 기록되는지 확인합니다.

```python
# 미션 수행에 사용할 데이터
valid_data = [
    {'name': '김철수', 'score': 95},
    {'name': '이영희', 'score': 88},
    {'name': '박민준', 'score': 58}, # 60점 미만 (과락)
    {'name': '최지우', 'score': 100}
]

invalid_data = [
    {'name': '김철수', 'score': 95},
    {'name': '이영희', 'score': 105}, # 100점 초과 (오류)
    {'name': '박민준', 'score': 88}
]
```

---

### **미션 풀이**:
이 미션을 해결하는 과정은 요구 사항에 따라 단계적으로 코드를 구현하는 것입니다.

1.  **모듈 임포트 및 로깅 설정**
    먼저, 로깅 기능을 사용하기 위해 `logging` 모듈을 임포트합니다. 그 다음 `logging.basicConfig()`를 사용하여 로그 파일의 이름, 파일 모드, 인코딩, 로그 레벨을 요구 사항에 맞게 설정합니다.

2.  **`process_scores` 함수 구현**
    *   학생 데이터 리스트를 인자로 받는 함수를 정의합니다.
    *   총점을 저장할 `total_score` 변수와 학생 수를 저장할 `num_students` 변수를 초기화합니다.
    *   `logging.debug()`를 사용하여 함수 시작과 함께 처리할 학생 수를 기록합니다.
    *   `for` 반복문으로 각 학생 데이터를 순회합니다.
        *   `logging.info()`로 현재 처리 중인 학생의 이름과 점수를 기록합니다.
        *   `assert` 문을 사용하여 점수가 0점과 100점 사이에 있는지 검증합니다. 이 조건을 만족하지 못하면 `AssertionError`가 발생하며 함수 실행이 중단됩니다.
        *   `if` 문으로 점수가 60점 미만인 경우 `logging.warning()`을 통해 과락 경고를 기록합니다.
        *   `total_score`에 현재 학생의 점수를 더합니다.
    *   반복문이 끝난 후, 학생 수가 0이 아닐 경우 평균 점수를 계산하고, `logging.info()`로 최종 평균 점수를 기록합니다.

3.  **`try...except`를 이용한 함수 호출**
    *   함수 외부에서 `try...except AssertionError` 블록을 사용하여 `process_scores` 함수를 호출합니다.
    *   먼저 `valid_data`를 인자로 전달하여 정상적인 실행 흐름과 로그 파일 생성을 확인합니다.
    *   그 다음, `invalid_data`를 인자로 전달하여 `AssertionError`가 발생하고, `except` 블록의 에러 메시지가 정상적으로 출력되는지 확인합니다. 이 과정에서 프로그램이 비정상 종료되지 않아야 합니다.

아래는 위 과정을 모두 반영한 최종 전체 소스코드입니다.

#### **최종 소스코드**

```python
import logging

# 1. 로깅 기본 설정
# - 로그 레벨: DEBUG
# - 로그 저장 파일: grade_reporter.log
# - 파일 쓰기 모드: 'w' (실행마다 새로 작성)
# - 인코딩: utf-8 (한글 깨짐 방지)
logging.basicConfig(
    level=logging.DEBUG,
    filename='grade_reporter.log',
    filemode='w',
    encoding='utf-8' 
)

def process_scores(student_data):
    """
    학생들의 성적 데이터를 처리하고, 평균 점수를 계산하며, 처리 과정을 로깅합니다.
    점수가 0~100 범위를 벗어나면 AssertionError를 발생시킵니다.
    """
    logging.debug(f"처리 시작: 총 {len(student_data)}명의 학생 데이터 처리")
    
    total_score = 0
    num_students = len(student_data)

    for student in student_data:
        name = student['name']
        score = student['score']
        
        logging.info(f"처리 중: {name} (점수: {score})")
        
        # 2. assert를 사용한 점수 유효성 검증
        assert 0 <= score <= 100, f"오류: {name} 학생의 점수({score})가 유효한 범위(0-100)를 벗어났습니다."

        # 4. 60점 미만일 경우 WARNING 로그 기록
        if score < 60:
            logging.warning(f"과락 경고: {name} (점수: {score})")
            
        total_score += score
    
    if num_students > 0:
        average_score = total_score / num_students
        logging.info(f"평균 점수 계산 완료: {average_score:.2f}")
    else:
        logging.info("처리할 학생 데이터가 없습니다.")

# 미션 수행에 사용할 데이터
valid_data = [
    {'name': '김철수', 'score': 95},
    {'name': '이영희', 'score': 88},
    {'name': '박민준', 'score': 58}, # 60점 미만 (과락)
    {'name': '최지우', 'score': 100}
]

invalid_data = [
    {'name': '김철수', 'score': 95},
    {'name': '이영희', 'score': 105}, # 100점 초과 (오류)
    {'name': '박민준', 'score': 88}
]

# 5. try...except 구문을 사용한 함수 호출
print("--- 유효한 데이터 처리 시작 ---")
try:
    process_scores(valid_data)
    print("성공적으로 처리되었습니다. 'grade_reporter.log' 파일을 확인하십시오.")
except AssertionError as e:
    print(f"데이터 처리 중 오류 발생: {e}")

print("\n" + "="*30 + "\n")

print("--- 유효하지 않은 데이터 처리 시작 ---")
try:
    process_scores(invalid_data)
except AssertionError as e:
    # assert의 에러 메시지를 터미널에 출력
    print(f"데이터 처리 중 오류 발생: {e}")
    # 에러 상황을 로그 파일에도 기록
    logging.error(f"AssertionError 발생: {e}")

```