### **미션 제목**: 장바구니 관리 함수를 안전하게 구현하기

### **미션 내용**:
사용자들의 쇼핑 장바구니를 관리하는 두 가지 함수를 구현합니다. 이 과정에서 함수에 가변(Mutable) 객체를 전달할 때 발생할 수 있는 잠재적인 문제들을 해결해야 합니다. 첫 번째 함수는 원본 데이터를 훼손하지 않고 새로운 추천 목록을 생성해야 하며, 두 번째 함수는 각 사용자에게 독립적인 장바구니를 제공해야 합니다.

### **미션 요구 사항**:

#### **1. 첫 번째 함수: `create_new_recommendations`**

*   함수 이름은 `create_new_recommendations`로 정의합니다.
*   이 함수는 두 개의 인자를 받습니다:
    *   `base_products`: 기본 상품 목록 (리스트)
    *   `new_product`: 새로 추가할 추천 상품
*   함수는 `base_products` 원본 리스트를 **절대로 수정해서는 안 됩니다.**
*   함수는 `base_products`의 모든 상품과 `new_product`가 추가된 **새로운 리스트**를 반환해야 합니다.
*   구현 후, 아래 테스트 코드를 통해 원본 리스트(`initial_list`)가 변경되지 않았음을 증명해야 합니다.
    ```python
    # 테스트용 코드
    initial_list = ['사과', '바나나', '체리']
    print(f"함수 호출 전 원본: {initial_list}")
    
    new_list = create_new_recommendations(initial_list, '딸기')
    
    print(f"함수 호출 후 원본: {initial_list}")
    print(f"함수가 반환한 새로운 리스트: {new_list}")
    ```

#### **2. 두 번째 함수: `add_to_cart`**

*   함수 이름은 `add_to_cart`로 정의합니다.
*   이 함수는 두 개의 인자를 받습니다:
    *   `product_name`: 장바구니에 추가할 상품 이름
    *   `cart`: 상품을 추가할 장바구니 (리스트). 이 인자는 선택적으로, 제공되지 않을 수도 있습니다.
*   만약 `cart` 인자가 제공되지 않은 경우, 함수는 **새로운 빈 장바구니를 생성**하고 `product_name`을 추가한 후 그 장바구니를 반환해야 합니다.
*   `cart` 인자가 제공된 경우에는, 제공된 `cart` 리스트에 `product_name`을 추가하고 해당 리스트를 반환해야 합니다.
*   **중요:** `cart` 인자 없이 함수를 여러 번 호출해도, 각 호출은 서로에게 영향을 주지 않는 **완전히 독립적인 장바구니**를 생성해야 합니다.
*   구현 후, 아래 테스트 코드를 통해 각기 다른 사용자의 장바구니가 독립적으로 관리되는지 증명해야 합니다.
    ```python
    # 테스트용 코드
    # 사용자 1: 첫 구매로 새 장바구니 생성
    user1_cart = add_to_cart("노트북")
    print(f"사용자 1의 첫 장바구니: {user1_cart}")
    
    # 사용자 2: 첫 구매로 새 장바구니 생성
    user2_cart = add_to_cart("마우스")
    print(f"사용자 2의 첫 장바구니: {user2_cart}")

    # 사용자 1: 기존 장바구니에 상품 추가
    add_to_cart("키보드", user1_cart)
    print(f"사용자 1의 최종 장바구니: {user1_cart}")
    ```

---

### **미션 풀이**:

이 섹션에서는 미션을 해결하는 구체적인 과정과 최종 소스 코드를 제공합니다.

#### **해결 과정**

1.  **`create_new_recommendations` 함수 구현**:
    *   이 함수의 목표는 원본 리스트 `base_products`를 수정하지 않고, 새 상품 `new_product`가 추가된 **새로운** 리스트를 반환하는 것입니다.
    *   이를 위해 먼저 `base_products.copy()`를 호출하여 원본 리스트의 복사본을 생성합니다.
    *   생성된 복사본에 `.append(new_product)`를 사용하여 새 상품을 추가합니다.
    *   마지막으로, 상품이 추가된 복사본 리스트를 반환합니다. 이 과정을 통해 원본 리스트는 안전하게 보호됩니다.

2.  **`add_to_cart` 함수 구현**:
    *   이 함수는 '가변 기본값 매개변수 함정'을 피해야 합니다. 따라서 매개변수를 `cart=[]`로 정의하는 대신 `cart=None`으로 정의합니다.
    *   함수 본문에서는 `if cart is None:` 조건문을 사용하여 `cart` 인자가 제공되었는지 확인합니다. `is` 연산자는 `None`과 같은 단일 객체를 비교할 때 권장되는 방식입니다.
    *   만약 `cart`가 `None`이라면 (즉, 인자가 제공되지 않았다면), `cart = []` 코드를 실행하여 함수 호출 시점에서 새로운 빈 리스트를 생성합니다.
    *   이후 `cart.append(product_name)`을 통해 상품을 추가하고, `cart` 리스트를 반환합니다. 이렇게 하면 함수가 `cart` 인자 없이 호출될 때마다 독립적인 장바구니가 생성됩니다.

#### **최종 소스 코드**

아래는 위 해결 과정을 바탕으로 작성된 미션의 전체 소스 코드입니다.

```python
# 미션 1: 원본을 수정하지 않고 새로운 추천 목록 생성하기
def create_new_recommendations(base_products, new_product):
    """
    기본 상품 목록(base_products)의 복사본을 만들어 새 상품(new_product)을 추가한 후,
    새로운 리스트를 반환합니다. 원본 리스트는 수정되지 않습니다.
    """
    # 1. base_products의 복사본을 만듭니다. (Side Effect 방지)
    new_list = base_products.copy()
    
    # 2. 복사본에 새로운 상품을 추가합니다.
    new_list.append(new_product)
    
    # 3. 수정된 복사본을 반환합니다.
    return new_list

# 미션 2: 독립적인 장바구니 생성 및 관리하기
def add_to_cart(product_name, cart=None):
    """
    상품(product_name)을 장바구니(cart)에 추가합니다.
    만약 cart가 제공되지 않으면(None), 새로운 장바구니를 생성하여 상품을 추가하고 반환합니다.
    이를 통해 '가변 기본값 매개변수 함정'을 피합니다.
    """
    # 1. cart가 제공되지 않았는지(None인지) 확인합니다.
    if cart is None:
        # 2. None이라면, 이 함수 호출 시점에서 새로운 빈 리스트를 생성합니다.
        cart = []
    
    # 3. 상품을 추가하고 리스트를 반환합니다.
    cart.append(product_name)
    return cart

# ======================================================================
# 테스트 코드
# ======================================================================

print("### 미션 1 테스트 ###")
# 테스트용 원본 리스트
initial_list = ['사과', '바나나', '체리']
print(f"함수 호출 전 원본: {initial_list}")

# 함수를 호출하여 새로운 리스트를 받음
new_list = create_new_recommendations(initial_list, '딸기')

# 원본 리스트가 변경되지 않았는지, 새로운 리스트는 올바르게 생성되었는지 확인
print(f"함수 호출 후 원본: {initial_list}")
print(f"함수가 반환한 새로운 리스트: {new_list}")
print("-" * 20)


print("\n### 미션 2 테스트 ###")
# 사용자 1: 첫 구매로 새 장바구니 생성
user1_cart = add_to_cart("노트북")
print(f"사용자 1의 첫 장바구니: {user1_cart}")

# 사용자 2: 첫 구매로 새 장바구니 생성 (사용자 1과 독립적인지 확인)
user2_cart = add_to_cart("마우스")
print(f"사용자 2의 첫 장바구니: {user2_cart}")

# 사용자 1: 기존 장바구니에 상품 추가
add_to_cart("키보드", user1_cart)
print(f"사용자 1의 최종 장바구니: {user1_cart}")

# 사용자 2의 장바구니는 영향을 받지 않았는지 최종 확인
print(f"사용자 2의 장바구니 (변경 없음): {user2_cart}")
```